{{ define "title" }} {{ .Recipe.Name }} {{ end }}
{{ define "description" }} {{ .Recipe.Description }} {{ end }}
{{ define "view" }}
<main>
  {{ template "back-to-home" }}
  <!-- Hero -->
  <div class="section">
    <h1 class="title is-1 is-size-3-mobile">{{ .Recipe.Name }}</h1>
    {{ template "share-buttons" . }}
    <div class="columns">
      <div class="column">{{ .Recipe.Description }}</div>
      <div class="column is-one-third">
        {{ template "nutrition-card" . }}
      </div>
    </div>
    <p class="content">{{ .Recipe.Text }}</p>
  </div>
  <!-- Requirements -->
  <div class="section">
    <div class="columns">
      <div class="column is-8">
        <h4 class="title is-4">{{ .UI.Recipe.Ingredients }}</h4>
        {{ range .Recipe.Ingredients }}
        <div class="">
          <span class="has-text-weight-bold">{{ Title .Product.Name }} </span>
          <span class="">{{ .Quantity }} {{ .Unit }} </span>
          {{ if .Optional}}
          <span class="tag is-primary is-light">{{ $.UI.Recipe.Optional }}</span>
          {{ else}}
          {{ end }}
        </div>
        {{ end }}
      </div>
      <div class="column is-4">
        <h4 class="title is-4">{{ .UI.Recipe.Equipment }}</h4>
        <ul>
          {{ range .Recipe.Equipment }}
          <li>{{ .Name }}</li>
          {{ end }}
        </ul>
      </div>
    </div>
  </div>
  <!-- Instructions -->
  <div class="section">
    <h4 class="title is-4">{{ .UI.Recipe.Instructions }}</h4>
    {{ range $i, $inst := .Recipe.Instructions }}
    <div class="columns">
      <div class="column is-narrow">
        <span class="title is-4 is-primary">{{ Plus1 $i }}</span>
      </div>
      <div class="column">
        <span>{{ $inst.Text }}</span>
      </div>
    </div>
    {{ end }}
  </div>
  <!-- Ideas -->
  <div class="section">
    <h4 class="title is-4">{{ .UI.Recipe.Ideas }}</h4>
    {{ range .Recipe.Ideas }}
    <div class="columns">
      <div class="column is-narrow">
        <p class="title is-3 is-primary">{{ RandomEmoji }}</p>
      </div>
      <div class="column">
        {{ .Text }}
      </div>
    </div>
    {{ end }}
    {{ template "share-buttons" . }}
  </div>
  </div>
</main>
{{ end }}

{{ define "share-result-twitter" }}
<a target="_blank" class="button is-fullwidth share-twitter-button"
  href="https://twitter.com/intent/tweet?original_referer={{ .Recipe.Link .Domain }}&amp;text={{ .Recipe.ShareText }}&amp;tw_p=tweet&amp;url={{ .Recipe.Link .Domain }}&amp;via={{ .UI.Base.Title }}">
  <span class="icon m-0 mr-1-tablet">
    <i class="bi bi-twitter"></i>
  </span>
  <span class="is-hidden-mobile">{{ .UI.Share.ShareMessage }} Twitter</span>
</a>
{{ end }}

{{ define "share-result-facebook" }}
<a target="_blank" class="button is-fullwidth share-facebook-button"
  onclick="return !window.open(this.href, 'Facebook', 'width=640,height=480')"
  href="https://www.facebook.com/sharer.php?u={{ .Recipe.Link .Domain }}" data-url="{{ .Recipe.Link .Domain }}">
  <span class="icon m-0 mr-1-tablet">
    <i class="bi bi-facebook"></i>
  </span>
  <span class="is-hidden-mobile">{{ .UI.Share.ShareMessage }} Facebook</span>
</a>
{{ end }}

{{ define "share-buttons"}}
<div class="level is-mobile">
  <div class="level-item">
    {{ template "share-result-twitter" . }}
  </div>
  <div class="level-item">
    {{ template "share-result-facebook" . }}
  </div>
</div>
{{ end }}

{{ define "nutrition-card" }}
<div class="box has-shadow has-bg-gradient2 has-text-white has-text-weight-bold is-size-6">
  <!-- Calories -->
  <div class="level mb-0 is-mobile">
    <div class="level-left">
      <div class="level-item">
        <p class="">{{ .UI.Recipe.Nutrition.Calories }}</p>
      </div>
    </div>
    <div class="level-right">
      <p class="level-item">{{ .Recipe.Nutrition.Calories }}</p>
    </div>
  </div>
  <!-- Protein -->
  <div class="level mb-0 is-mobile">
    <div class="level-left">
      <div class="level-item">
        <p class="">{{ .UI.Recipe.Nutrition.Protein }}</p>
      </div>
    </div>
    <div class="level-right">
      <p class="level-item">{{ .Recipe.Nutrition.Protein }}</p>
    </div>
  </div>
  <!-- Carbs -->
  <div class="level mb-0 is-mobile">
    <div class="level-left">
      <div class="level-item">
        <p class="">{{ .UI.Recipe.Nutrition.Carbs }}</p>
      </div>
    </div>
    <div class="level-right">
      <p class="level-item">{{ .Recipe.Nutrition.Carbs }}</p>
    </div>
  </div>
  <!-- Fat -->
  <div class="level mb-0 is-mobile">
    <div class="level-left">
      <div class="level-item">
        <p class="">{{ .UI.Recipe.Nutrition.Fat }}</p>
      </div>
    </div>
    <div class="level-right">
      <p class="level-item">{{ .Recipe.Nutrition.Fat }}</p>
    </div>
  </div>
</div>
{{ end }}
